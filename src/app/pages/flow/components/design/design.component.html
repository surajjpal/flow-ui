<!-- page content -->
<div>
   <div class="col-md-12 col-sm-12 col-xs-12">
      <button type="button" class="btn btn-outline-danger btn-with-icon" style="margin-right: 5px" data-toggle="modal"
         data-target="#discardWarningModal">
         <i class="ion-ios-refresh"></i>Discard</button>
      <button type="button" class="btn btn-outline-success btn-with-icon" style="margin-right: 5px" (click)="saveOnServer()"
         *ngIf="!readOnly">
         <i class="fa fa-floppy-o" aria-hidden="true"></i>Save</button>
      <button type="button" class="btn btn-outline-primary btn-with-icon" style="margin-right: 5px" (click)="prepareDummyObject()"
         *ngIf="!readOnly" data-toggle="modal" data-target="#settignsModal">
         <i class="fa fa-cogs" aria-hidden="true"></i>Settings</button>
      <button type="button" class="btn btn-outline-info btn-with-icon" style="margin-right: 5px" (click)="toolsChoice(ZOOM_IN)">
         <i class="fa fa-search-plus" aria-hidden="true"></i>Zoom In</button>
      <button type="button" class="btn btn-outline-info btn-with-icon" style="margin-right: 5px" (click)="toolsChoice(ZOOM_OUT)">
         <i class="fa fa-search-minus" aria-hidden="true"></i>Zoom Out</button>
      <button type="button" class="btn btn-outline-info btn-with-icon" style="margin-right: 5px" (click)="toolsChoice(ZOOM_ACTUAL)">
         <i class="ion-arrow-expand"></i>Zoom Actual</button>
      <button type="button" class="btn btn-outline-info btn-with-icon" style="margin-right: 5px" (click)="toolsChoice(PRINT_PREVIEW)">
         <i class="ion-printer"></i>Print Preview</button>
   </div>
   <br>
   <div class="col-md-12 col-sm-12 col-xs-12">
      <div id="editorGrid" class="col-md-12 col-sm-12 col-xs-12" style="height:80vh;overflow:hidden;margin-bottom:1px;border-style:solid;border-color:silver;"></div>
      <div id="outlineContainer" style="z-index:1;position:absolute;overflow:hidden;top:5px;right:20px;width:120px;height:90px;background:transparent;border-style:solid;border-color:lightgray;"></div>
   </div>
</div>
<!-- Modal - Add State -->
<div class="modal fade" data-backdrop="static" data-keyboard="false" id="stateModal" tabindex="-1" role="dialog"
   attr.aria-labelledby="stateModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="stateModalLabel">
               {{stateCreateMode ? 'Add State' : 'Update State'}}
            </h4>
            <button type="button" class="btn btn-outline-info" data-dismiss="modal" (click)="disableBulkEdit()">
               <span aria-hidden="true">&times;</span>
               <span class="sr-only">Close</span>
            </button>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            <form>
               <div class="form-group">
                  <label for="inputStateCode">State Code</label>
                  <input type="text" class="form-control" required id="inputStateCode" placeholder="State Code"
                     [(ngModel)]="tempState.stateCd" name="stateCd" />
               </div>
               <div class="form-group">
                  <label for="selectStateType">State Type</label>
                  <select class="selectpicker form-control" required id="selectStateType" title="Choose State Type"
                     [(ngModel)]="tempState.type" name="type">
                     <option *ngFor="let stateType of sourceStateTypes" [value]="stateType">{{stateType}}</option>
                  </select>
               </div>
               <div class="form-group">
                  <label for="reportFlag">Report Flag</label>
                  <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="tempState.reportFlag" [label]="'Report Flag'"
                     (event)="tempState.reportFlag = $event.target.checked"></api-checkbox>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual'">
                  <label for="selectAllocationType">Allocation Type</label>
                  <select class="selectpicker form-control" required id="selectAllocationType" title="Choose Allocation Type"
                     [(ngModel)]="tempState.allocationModel.allocationType" name="allocationType">
                     <option *ngFor="let allocationType of allocationTypes" [value]="allocationType">{{allocationType}}</option>
                  </select>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual' && tempState.allocationModel.allocationType !== 'Personal'">
                  <label for="allocationGroup">Allocate to group</label>
                  <input type="text" class="form-control" required id="allocationGroup" placeholder="Allocate to group"
                     [(ngModel)]="tempState.allocationModel.allocationGroup" name="allocationGroup" />
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual' && tempState.allocationModel.allocationType !== 'Group'">
                  <label for="allocationGroup">Allocate to default group</label>
                  <input type="text" class="form-control" required id="allocationGroup" placeholder="Allocate to default group"
                     [(ngModel)]="tempState.allocationModel.allocationGroup" name="allocationGroup" />
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual' && tempState.allocationModel.allocationType !== 'Group'">
                  <label for="groups">Allocate to groups</label>
                  <tag-input [(ngModel)]="tempState.allocationModel.groups" name="groups" [modelAsStrings]="true"
                     [editable]="true" [separatorKeys]="[32]" placeholder="+Groups (Enter separated)"
                     secondaryPlaceholder="Add groups" theme="minimal" class="custom-input-tag-border"></tag-input>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual' && tempState.allocationModel.allocationType === 'Capability'">
                  <label for="groups">Allocate to Capabilities</label>
                  <tag-input [(ngModel)]="tempState.allocationModel.capabilities" name="capabilities" [modelAsStrings]="true"
                     [editable]="true" [separatorKeys]="[32]" placeholder="+Groups (Enter separated)"
                     secondaryPlaceholder="Add groups" theme="minimal" class="custom-input-tag-border"></tag-input>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual' && tempState.allocationModel.allocationType === 'Retain_Familiar'">
                  <label for="groups">Allocate to States</label>
                  <tag-input [(ngModel)]="tempState.allocationModel.stickyStates" name="stickyStates" [modelAsStrings]="true"
                     [editable]="true" [separatorKeys]="[32]" placeholder="+Groups (Enter separated)"
                     secondaryPlaceholder="Add groups" theme="minimal" class="custom-input-tag-border"></tag-input>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual' && tempState.allocationModel.allocationType === 'User'">
                  <label for="allocationUser">Allocate to User</label>
                  <input type="text" class="form-control" required id="allocationUser" placeholder="Allocate to User"
                     [(ngModel)]="tempState.allocationModel.allocatedUserCd" name="allocatedUserCd" />
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual'  && tempState.allocationModel.allocationType === 'User'">
                  <label for="api">API</label>
                  <input type="text" class="form-control" required id="api" placeholder="API" [(ngModel)]="tempState.allocationModel.api"
                     name="api" />
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual'  && tempState.allocationModel.allocationType !== 'Group'">
                  <label for="api">Email API</label>
                  <input type="text" class="form-control" required id="api" placeholder="Email API" [(ngModel)]="tempState.allocationModel.emailerAPI"
                     name="api" />
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual'  && tempState.allocationModel.allocationType === 'API'">
                  <label for="api">API</label>
                  <input type="text" class="form-control" required id="api" placeholder="API" [(ngModel)]="tempState.allocationModel.api"
                     name="api" />
               </div>
               <div class="form-group" *ngIf="stateCreateMode && sourceEvents && sourceEvents.length > 0">
                  <label for="selectStateTrigger">State Trigger</label>
                  <select class="selectpicker form-control" required id="selectStateTrigger" title="Choose trigger for this state"
                     [(ngModel)]="tempState.trigger" name="trigger">
                     <option *ngFor="let event of sourceEvents" [ngValue]="event">{{event.eventCd}}</option>
                  </select>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Auto'">
                  <label for="selectEntryActions">Entry Actions</label>
                  <select multiple="true" class="selectpicker form-control" required id="selectEntryActions" title="Choose Entry Actions"
                     [(ngModel)]="tempState.entryActionList" name="entryActionList">
                     <option *ngFor="let entryAction of sourceEntryActionList" [ngValue]="entryAction['key']">{{entryAction['value']}}</option>
                  </select>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Auto' && tempState.entryActionList && tempState.entryActionList.length>0 &&  tempState.entryActionList[0] === 'TimerStateEntryAction'">
                  <label for="timerUnitType">Timer Unit Type</label>
                  <!-- <input type="text" class="form-control" required id="timerUnitType" placeholder="Timer Unit Type" [(ngModel)]="tempState.timerUnitType" name="timerUnitType" /> -->
                  <select class="selectpicker form-control" required id="selectTimerUnitType" title="Choose Timer Unit"
                     [(ngModel)]="tempState.timerUnitType" name="timerUnitType">
                     <option *ngFor="let timerUnitType of sourceTimerUnitList" [ngValue]="timerUnitType['key']">{{timerUnitType['value']}}</option>
                  </select>
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Auto' && tempState.entryActionList && tempState.entryActionList.length>0 &&  tempState.entryActionList[0] === 'TimerStateEntryAction'">
                  <label for="timerUnit">Timer Units</label>
                  <input type="number" class="form-control" required id="timerUnit" placeholder="Timer Unit"
                     [(ngModel)]="tempState.timerUnit" name="timerUnit" min="0" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46)" />
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Auto' && tempState.entryActionList && tempState.entryActionList.length>0 &&  tempState.entryActionList[0] === 'TimerStateEntryAction'">
                  <label for="timerUnit">Timer Date Paramter</label>
                  <input type="text" class="form-control" required id="runAtDateExpression" placeholder="Enter parameter to pick Run Date"
                     [(ngModel)]="tempState.runAtDateExpression" name="runAtDateExpression" min="0" />
               </div>
               <div class="form-group" *ngIf="tempState.allocationModel !== null && tempState.type === 'Auto' && tempState.entryActionList && tempState.entryActionList.length>0 &&  tempState.entryActionList[0] === 'TimerStateEntryAction'">
                  <label for="timerUnit">Timer Time Parameter</label>
                  <input type="text" class="form-control" required id="runAtTimeExpression" placeholder="Enter parameter to pick Run Time"
                     [(ngModel)]="tempState.runAtTimeExpression" name="runAtTimeExpression" min="0" />
               </div>
               <div class="form-group" *ngIf="isStateApiCompatible()">
                  <label for="selectApiConfig">Select API</label>
                  <select multiple="true" class="selectpicker form-control" required id="selectApiConfig" title="Choose API"
                     [(ngModel)]="tempState.apiConfigurationList" name="apiConfigurationList">
                     <option *ngFor="let apiConfig of sourceApiConfigList" [ngValue]="apiConfig._id">{{apiConfig.name}}</option>
                  </select>
               </div>
               <div class="form-group" *ngIf="isStateConnectorCompatible()">
                  <!-- <label for="selectConConfig">Select Connector</label>
                      <select multiple="false" class="selectpicker form-control" required id="selectConConfig" title="Choose Connector" [(ngModel)]="tempState.connectorConfig"
                        name="conConfigurationList"  [ngModelOptions]="{standalone: true}" (ngModelChange)="onConfigSelect($event)">
                        <option *ngFor="let conConfig of sourceConConfigList" [ngValue]="conConfig">{{conConfig.configName}}</option>
                      </select> -->
                  <label for="selectConConfig">Select Connector</label>
                  <select multiple="false" class="selectpicker form-control" required id="selectConConfig" title="Choose Connector"
                     [(ngModel)]="tempState.connectorConfigList" name="connectorConfigList" [ngModelOptions]="{standalone: true}"
                     (ngModelChange)="setConnectorTaskConfig()">
                     <option *ngFor="let conConfig of sourceConConfigList" [ngValue]="conConfig.configName">{{conConfig.configName}}</option>
                  </select>
               </div>
               <div class="form-group" *ngIf="selectedConfig && stateCreateMode">
                  <form class="row form-inline">
                     <div *ngFor="let conInfo of conInfoList">
                        <div class="form-group col-sm-1">
                           <button type="button" class="btn btn-outline-primary" (click)="connectorSelected(conInfo)">Configure
                              {{conInfo.displayName}}</button>
                        </div>
                     </div>
                  </form>
               </div>
               <div class="form-group" *ngIf="selectedConfig && !stateCreateMode && tempState.taskConfig.length > 0">
                  <form class="row form-inline">
                     <div *ngFor="let conInfo of conInfoList">
                        <div class="form-group col-sm-1">
                           <button *ngIf="tempState.taskConfig[0].connectorInfoRef == conInfo.type " type="button"
                              class="btn btn-outline-success" (click)="connectorSelected(conInfo)">Configured
                              {{conInfo.displayName}}</button>
                           <button *ngIf="tempState.taskConfig[0].connectorInfoRef !== conInfo.type " type="button"
                              class="btn btn-outline-primary" (click)="connectorSelected(conInfo)">Configure
                              {{conInfo.displayName}}</button>
                        </div>
                     </div>
                  </form>
               </div>
               <div *ngIf="loadingConfigMap">
                  <div class="row">
                     <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="progress">
                           <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                              style="width: 100%;" aria-valuenow="99" aria-valuemin="0" aria-valuemax="100">Loading.....</div>
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-lg-12 col-md-12 col-sm-12">
                        <br />
                     </div>
                  </div>
               </div>
               <div *ngIf="isStateConnectorCompatible() && tempState.connectorConfigList && tempState.connectorConfigList.length > 0">
                  <!-- <div class="form-group"> -->
                  <!-- <ul class="nav nav-tabs" role="tablist">
                   <li *ngFor="let configName of tempState.connectorConfigList" class="nav-item">
                       <a [ngClass]="tempState.connectorConfigList.length ==1 ? 'nav-link active' : 'nav-link'" [attr.aria-expanded]="tempState.connectorConfigList.length ==1 ? 'true' : 'false'" data-toggle="tab" [href]="'#' + configName" role="tab">{{ configName }}</a>
                   </li>
                   </ul> -->
                  <div class="tab-content">
                     <div *ngFor="let taskConfig of getTempStateConnectorList()">
                        <div class="form-group">
                           <label><b>{{ getDisplyConConfigName(taskConfig) }}</b></label>
                           <div *ngIf="getTempConInfoList(getDisplyConConfigName(taskConfig)).length > 1" style="margin-bottom: 15px;">
                              <label>Select task</label>
                              <select (change)="onConInfoTaskSelect($event, taskConfig, getDisplyConConfigName(taskConfig))"
                                 class="form-control" required id="configTypeTaskselection" title="Choose Process"
                                 [(ngModel)]="tempSelectedConfigTypeTask[getDisplyConConfigName(taskConfig)]" name="machineType">
                                 <option *ngFor="let conInfo of tempSelectedConnectorInfoList[getDisplyConConfigName(taskConfig)]"
                                    [ngValue]="conInfo.type">{{ conInfo.displayName }}
                                 </option>
                              </select>
                           </div>
                           <ul class="nav nav-tabs" role="tablist">
                              <li class="nav-item">
                                 <a class="nav-link active" data-toggle="tab" [href]="'#tab_config' + getRefConConfigName(taskConfig)"
                                    role="tab" aria-expanded="true">Configuration</a>
                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" data-toggle="tab" [href]="'#tab_payload' + getRefConConfigName(taskConfig)"
                                    role="tab">Payload</a>
                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" data-toggle="tab" [href]="'#tab_response' + getRefConConfigName(taskConfig)"
                                    role="tab">Response</a>
                              </li>
                           </ul>
                           <div class="tab-content">
                              <div role="tabpanel" class="tab-pane fade show active" [id]="'tab_config' + getRefConConfigName(taskConfig)">
                                 <table class="table" [mfData]="taskConfig.configMap" #mfConfigs="mfDataTable"
                                    [mfRowsOnPage]="10">
                                    <thead>
                                       <tr>
                                          <th>Action</th>
                                          <th>Key</th>
                                          <th>Value</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr *ngFor="let config of mfConfigs.data">
                                          <td>
                                             <button type="button" class="btn btn-outline-danger" title="Delete"
                                                (click)="removeConfigParamFromTask(taskConfig.configMap, config)"><i
                                                   class="ion-close-round"></i></button>
                                          </td>
                                          <td>
                                             <input type="text" class="form-control" placeholder="key" [value]="config.key"
                                                (input)="config.key = $event.target.value" />
                                          </td>
                                          <td *ngIf="config.type == 'string'">
                                             <input type="text" class="form-control" placeholder="key" [value]="config.value"
                                                (input)="config.value = $event.target.value" />
                                          </td>
                                          <td *ngIf="config.type == 'file'">
                                             <label [attr.for]="'file-uploadconfig' + getRefConConfigName(taskConfig) + config.key"
                                                class="custom-file-upload">
                                                <i class="fa fa-cloud-upload"></i> {{stateCreateMode ? 'Upload File ' :
                                                'Upload New File'}}
                                             </label>
                                             <label>{{config.fileName}}</label>
                                             <input [id]="'file-uploadconfig' + getRefConConfigName(taskConfig) + config.key"
                                                type="file" (change)=onFileUploadForTaskConfig($event,config) />
                                          </td>
                                          <td *ngIf="config.type == 'list'">
                                             <select class="selectpicker form-control" required id="selectUser" title="Choose Value"
                                                name="value" [(ngModel)]="config.value" [ngModelOptions]="{standalone: true}"
                                                (ngModelChange)="onValueSelect($event,config)">
                                                <option *ngFor="let value of config.valueList" [ngValue]="value">{{value}}</option>
                                             </select>
                                          </td>
                                       </tr>
                                    </tbody>
                                    <tfoot>
                                       <tr>
                                          <td colspan="2">
                                             <mfBootstrapPaginator></mfBootstrapPaginator>
                                          </td>
                                          <td colspan="1" style="text-align: right;">
                                             <button type="button" class="btn btn-outline-primary" (click)="addConfigParamToTask(taskConfig.configMap)">Add
                                                Param</button>
                                          </td>
                                       </tr>
                                    </tfoot>
                                 </table>
                              </div>
                              <div role="tabpanel" class="tab-pane fade" [id]="'tab_payload' + getRefConConfigName(taskConfig)">
                                 <table class="table" [mfData]="taskConfig.taskObjectBody" #mfPayloadConfigs="mfDataTable"
                                    [mfRowsOnPage]="10">
                                    <thead>
                                       <tr>
                                          <th>Action</th>
                                          <th>Key</th>
                                          <th>Value</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr *ngFor="let body of mfPayloadConfigs.data">
                                          <td>
                                             <button type="button" class="btn btn-outline-danger" title="Delete"
                                                (click)="removeBodyFromTask(taskConfig.taskObjectBody, body)"><i class="ion-close-round"></i></button>
                                          </td>
                                          <td>
                                             <input type="text" class="form-control" placeholder="Key" [value]="body.key"
                                                (input)="body.key = $event.target.value" />
                                          </td>
                                          <td>
                                             <input type="text" class="form-control" placeholder="Value" [value]="body.value"
                                                (input)="body.value = $event.target.value" />
                                          </td>
                                       </tr>
                                    </tbody>
                                    <tfoot>
                                       <tr>
                                          <td colspan="2">
                                             <mfBootstrapPaginator></mfBootstrapPaginator>
                                          </td>
                                          <td colspan="1" style="text-align: right;">
                                             <button type="button" class="btn btn-outline-primary" (click)="addBodyToTask(taskConfig.taskObjectBody)">Add
                                                Param</button>
                                          </td>
                                       </tr>
                                    </tfoot>
                                 </table>
                              </div>
                              <div role="tabpanel" class="tab-pane fade" [id]="'tab_response' + getRefConConfigName(taskConfig)">
                                 <div [id]="'responseAccordion' + getRefConConfigName(taskConfig)" role="tablist"
                                    aria-multiselectable="true" *ngIf="taskConfig.taskObjectResponseList.length > 0">
                                    <div *ngFor="let response of taskConfig.taskObjectResponseList; let index=index"
                                       class="panel">
                                       <div class="card">
                                          <div *ngIf="index == 0" [id]="'responseTabHeading' + getRefConConfigName(taskConfig) + index"
                                             class="card-header" heightStyle="content" role="tab">
                                             <h5 class="mb-0">
                                                <a data-toggle="collapse" [attr.data-parent]="'#responseAccordion' + getRefConConfigName(taskConfig)"
                                                   [href]="'#responseCollapse' + getRefConConfigName(taskConfig) + index"
                                                   aria-expanded="true" [attr.aria-controls]="'responseCollapse' + getRefConConfigName(taskConfig) + index"
                                                   (click)="selectedResponse=response">
                                                   Response for status {{response.responseCode}}
                                                </a>
                                             </h5>
                                          </div>
                                          <div *ngIf="index != 0" [id]="'responseTabHeading' + getRefConConfigName(taskConfig) + index"
                                             class="card-header" heightStyle="content" role="tab">
                                             <h5 class="mb-0">
                                                <a class="collapsed" data-toggle="collapse" [attr.data-parent]="'#responseAccordion' + getRefConConfigName(taskConfig)"
                                                   [href]="'#responseCollapse' + getRefConConfigName(taskConfig) + index"
                                                   aria-expanded="false" [attr.aria-controls]="'responseCollapse' + getRefConConfigName(taskConfig) + index"
                                                   (click)="selectedResponse=response">
                                                   Response for status {{response.responseCode}}
                                                </a>
                                             </h5>
                                          </div>
                                          <div *ngIf="index == 0" [id]="'responseCollapse' + getRefConConfigName(taskConfig) + index"
                                             class="collapse show" role="tabpanel" [attr.aria-labelledby]="'responseTabHeading' + getRefConConfigName(taskConfig) + index">
                                             <div class="card-block">
                                                <form>
                                                   <div class="form-group">
                                                      <label>Status Code</label>
                                                      <input type="text" class="form-control" placeholder="Status Code"
                                                         [(ngModel)]="response.responseCode" name="responseCode" />
                                                   </div>
                                                   <div class="form-group">
                                                      <label>Response Type</label>
                                                      <select class="selectpicker form-control" title="Select response type"
                                                         [(ngModel)]="response.responseType" name="responseType">
                                                         <option *ngFor="let responseType of responseTypeSource"
                                                            [value]="responseType">{{responseType}}</option>
                                                      </select>
                                                   </div>
                                                   <div class="form-group" *ngIf="response.responseType === 'PARAM'">
                                                      <label>Params to select</label>
                                                      <select (onchange)="onResponseTypeChange()" class="selectpicker form-control"
                                                         title="Choose params to select" [(ngModel)]="response.paramsToSelect"
                                                         name="paramsToSelect">
                                                         <option *ngFor="let paramsToSelect of paramsToSelectSource"
                                                            [value]="paramsToSelect">{{paramsToSelect}}</option>
                                                      </select>
                                                   </div>
                                                   <div class="form-group" *ngIf="response.responseType === 'PAYLOAD'">
                                                      <label>Key to save payload</label>
                                                      <input type="text" class="form-control" placeholder="Key to save payload"
                                                         [(ngModel)]="response.keyExpressionList[0].key" name="key" />
                                                   </div>
                                                   <div class="form-group">
                                                      <form class="row form-inline">
                                                         <div class="form-group col-sm-2">
                                                            <button type="button" class="btn btn-outline-primary"
                                                               (click)="cloneResponseForTaskConfig(taskConfig.taskObjectResponseList, response)">Clone
                                                               Response</button>
                                                         </div>
                                                         <div class="form-group col-sm-2 offset-sm-6">
                                                            <button type="button" class="btn btn-outline-danger"
                                                               (click)="removeResponseFromTask(taskConfig.taskObjectResponseList, response)">Remove
                                                               Response</button>
                                                         </div>
                                                      </form>
                                                   </div>
                                                </form>
                                                <br>
                                                <table *ngIf="response.responseType === 'PARAM' && response.paramsToSelect === 'SELECTIVE'"
                                                   class="table" [mfData]="response.keyExpressionList" [mfRowsOnPage]="5">
                                                   <thead>
                                                      <tr>
                                                         <th>Action</th>
                                                         <th>Key to save param</th>
                                                         <th>Expression</th>
                                                      </tr>
                                                   </thead>
                                                   <tbody>
                                                      <tr *ngFor="let expressionMap of response.keyExpressionList">
                                                         <td>
                                                            <button type="button" class="btn btn-outline-danger" title="Delete"
                                                               (click)="removeResponseExpressionFromTask(response, expressionMap)"><i
                                                                  class="ion-close-round"></i></button>
                                                         </td>
                                                         <td>
                                                            <input type="text" class="form-control" placeholder="Key"
                                                               [value]="expressionMap.key" (input)="expressionMap.key = $event.target.value">
                                                         </td>
                                                         <td>
                                                            <input type="text" class="form-control" placeholder="Expression"
                                                               [value]="expressionMap.expression" (input)="expressionMap.expression = $event.target.value" />
                                                         </td>
                                                      </tr>
                                                   </tbody>
                                                   <tfoot>
                                                      <tr>
                                                         <td colspan="2">
                                                            <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,50,100]"></mfBootstrapPaginator>
                                                         </td>
                                                         <td colspan="1" style="text-align: right;">
                                                            <button type="button" class="btn btn-outline-primary"
                                                               (click)="addResponseExpressionToTask(response)">Add
                                                               Expression</button>
                                                         </td>
                                                      </tr>
                                                   </tfoot>
                                                </table>
                                             </div>
                                          </div>
                                          <div *ngIf="index != 0" [id]="'responseCollapse' + getRefConConfigName(taskConfig) + index"
                                             class="collapse" role="tabpanel" [attr.aria-labelledby]="'responseTabHeading' + getRefConConfigName(taskConfig) + index">
                                             <div class="card-block">
                                                <form>
                                                   <div class="form-group">
                                                      <label>Status Code</label>
                                                      <input type="text" class="form-control" placeholder="Status Code"
                                                         [(ngModel)]="response.responseCode" name="responseCode" />
                                                   </div>
                                                   <div class="form-group">
                                                      <label>Response Type</label>
                                                      <select class="selectpicker form-control" title="Select response type"
                                                         [(ngModel)]="response.responseType" name="responseType">
                                                         <option *ngFor="let responseType of responseTypeSource"
                                                            [value]="responseType">{{responseType}}</option>
                                                      </select>
                                                   </div>
                                                   <div class="form-group" *ngIf="response.responseType === 'PARAM'">
                                                      <label>Params to select</label>
                                                      <select (onchange)="onResponseTypeChange()" class="selectpicker form-control"
                                                         title="Choose params to select" [(ngModel)]="response.paramsToSelect"
                                                         name="paramsToSelect">
                                                         <option *ngFor="let paramsToSelect of paramsToSelectSource"
                                                            [value]="paramsToSelect">{{paramsToSelect}}</option>
                                                      </select>
                                                   </div>
                                                   <div class="form-group" *ngIf="response.responseType === 'PAYLOAD'">
                                                      <label>Key to save payload</label>
                                                      <input type="text" class="form-control" placeholder="Key to save payload"
                                                         [(ngModel)]="response.keyExpressionList[0].key" name="key" />
                                                   </div>
                                                   <div class="form-group">
                                                      <form class="row form-inline">
                                                         <div class="form-group col-sm-2">
                                                            <button type="button" class="btn btn-outline-primary"
                                                               (click)="cloneResponseForTaskConfig(taskConfig.taskObjectResponseList, response)">Clone
                                                               Response</button>
                                                         </div>
                                                         <div class="form-group col-sm-2 offset-sm-6">
                                                            <button type="button" class="btn btn-outline-danger"
                                                               (click)="removeResponseFromTask(taskConfig.taskObjectResponseList, response)">Remove
                                                               Response</button>
                                                         </div>
                                                      </form>
                                                   </div>
                                                </form>
                                                <br>
                                                <table *ngIf="response.responseType === 'PARAM' && response.paramsToSelect === 'SELECTIVE'"
                                                   class="table" [mfData]="response.keyExpressionList" [mfRowsOnPage]="5">
                                                   <thead>
                                                      <tr>
                                                         <th>Action</th>
                                                         <th>Key to save param</th>
                                                         <th>Expression</th>
                                                      </tr>
                                                   </thead>
                                                   <tbody>
                                                      <tr *ngFor="let expressionMap of response.keyExpressionList">
                                                         <td>
                                                            <button type="button" class="btn btn-outline-danger" title="Delete"
                                                               (click)="removeResponseExpressionFromTask(response, expressionMap)"><i
                                                                  class="ion-close-round"></i></button>
                                                         </td>
                                                         <td>
                                                            <input type="text" class="form-control" placeholder="Key"
                                                               [value]="expressionMap.key" (input)="expressionMap.key = $event.target.value">
                                                         </td>
                                                         <td>
                                                            <input type="text" class="form-control" placeholder="Expression"
                                                               [value]="expressionMap.expression" (input)="expressionMap.expression = $event.target.value" />
                                                         </td>
                                                      </tr>
                                                   </tbody>
                                                   <tfoot>
                                                      <tr>
                                                         <td colspan="2">
                                                            <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,50,100]"></mfBootstrapPaginator>
                                                         </td>
                                                         <td colspan="1" style="text-align: right;">
                                                            <button type="button" class="btn btn-outline-primary"
                                                               (click)="addResponseExpressionToTask(response)">Add
                                                               Expression</button>
                                                         </td>
                                                      </tr>
                                                   </tfoot>
                                                </table>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="row col-sm-12">
                                    <button type="button" class="btn btn-outline-primary" (click)="addResponseToTask(taskConfig.taskObjectResponseList)">Add
                                       Response</button>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <!-- </div> -->
               </div>
               <div class="form-group" *ngIf="tempState.costModel !== null">
                  <label for="selectCostType">Cost Type</label>
                  <select class="selectpicker form-control" required id="selectCostType" title="Choose Cost Type"
                     [(ngModel)]="tempState.costModel.costType" name="costType">
                     <option *ngFor="let amountType of amountTypes" [value]="amountType">{{amountType}}</option>
                  </select>
               </div>
               <div class="form-group" *ngIf="tempState.costModel !== null && tempState.costModel.costType === 'FIXED'">
                  <label for="amount">Fixed cost</label>
                  <input type="number" class="form-control" required id="amount" placeholder="Fixed cost" [(ngModel)]="tempState.costModel.amount"
                     name="amount" min="0" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46)" />
               </div>
               <div class="form-group" *ngIf="tempState.costModel !== null && tempState.costModel.costType === 'DERIVED'">
                  <label for="expression">Fixed cost</label>
                  <input type="text" class="form-control" required id="expression" placeholder="Cost Expression"
                     [(ngModel)]="tempState.costModel.expression" name="expression" />
               </div>
               <div class="form-group" *ngIf="tempState.costModel !== null && tempState.costModel.costType === 'API'">
                  <label for="apiCd">Cost API</label>
                  <input type="text" class="form-control" required id="apiCd" placeholder="Cost API" [(ngModel)]="tempState.costModel.apiCd"
                     name="apiCd" />
               </div>
               <div class="form-group" *ngIf="graphObject.dataPointConfigurationList.length > 0">
                  <label for="selectMandatoryDataPoints">Mandatory Data Points</label>
                  <select multiple="true" class="selectpicker form-control" required id="selectMandatoryDataPoints"
                     title="Choose Mandatory Data Points" [(ngModel)]="tempState.mandatoryDataPoints" name="mandatoryDataPoints">
                     <option *ngFor="let dataPoint of graphObject.dataPointConfigurationList" [ngValue]="dataPoint">{{dataPoint.dataPointLabel}}</option>
                  </select>
               </div>
            </form>
            <!--<div id="manualActionAccordion" role="tablist" aria-multiselectable="true" *ngIf="tempState.allocationModel !== null && tempState.type === 'Manual'">
               <div class="panel card">
                  <div id="manualActionTabHeader" class="card-header" heightStyle="content" role="tab">
                     <h5 class="mb-0">
                        <a data-toggle="collapse" data-parent="#manualActionAccordion" href="#manualActionCollapse"
                           aria-expanded="true" aria-controls="manualActionCollapse">
                           Manual Actions
                        </a>
                     </h5>
                  </div>
                  <div id="manualActionCollapse" class="collapse show" role="tabpanel" aria-labelledby="manualActionTabHeader">
                     <div class="card-block">
                        <table class="table" [mfData]="tempState.manualActions" [mfRowsOnPage]="5">
                           <thead>
                              <tr>
                                 <th>Delete</th>
                                 <th>Sequence</th>
                                 <th>Key to save Result</th>
                                 <th>Label</th>
                                 <th>Description</th>
                                 <th>Type</th>
                                 <th>Action</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr *ngFor="let manualAction of tempState.manualActions">
                                 <td>
                                    <button type="button" class="btn btn-outline-danger" title="Delete" (click)="removeManualAction(manualAction)">
                                       <i class="ion-close-round"></i>
                                    </button>
                                 </td>
                                 <td>
                                    <input type="number" class="form-control" placeholder="Sequence" [value]="manualAction.sequence"
                                       (input)="manualAction.sequence = $event.target.value" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46)">
                                 </td>
                                 <td>
                                    <input type="text" class="form-control" placeholder="Key" [value]="manualAction.key"
                                       (input)="manualAction.key = $event.target.value">
                                 </td>
                                 <td>
                                    <input type="text" class="form-control" placeholder="Label" [value]="manualAction.label"
                                       (input)="manualAction.label = $event.target.value">
                                 </td>
                                 <td>
                                    <input type="text" class="form-control" placeholder="Description" [value]="manualAction.description"
                                       (input)="manualAction.description = $event.target.value">
                                 </td>
                                 <td>
                                    <select class="selectpicker form-control" title="Choose type" [(ngModel)]="manualAction.type"
                                       name="type">
                                       <option *ngFor="let type of sourceManualActionType" [ngValue]="type">{{type}}</option>
                                    </select>
                                 </td>
                                 <td>
                                    <tag-input *ngIf="manualAction.type === 'SINGLE_SELECT' || manualAction.type === 'MULTI_SELECT'"
                                       [(ngModel)]="manualAction.value" name="action" [modelAsStrings]="true"
                                       [editable]="true" [separatorKeys]="[32]" placeholder="+Action (Enter separated)"
                                       secondaryPlaceholder="Populate source actions" theme="minimal" class="custom-input-tag-border"></tag-input>
                                    <input *ngIf="manualAction.type === 'STRING' || manualAction.type === 'NUMBER' || manualAction.type === 'BOOLEAN'"
                                       type="text" disabled class="form-control" placeholder="Editable to client"
                                       [value]="manualAction.value" (input)="manualAction.value = $event.target.value">
                                 </td>
                              </tr>
                           </tbody>
                           <tfoot>
                              <tr>
                                 <td colspan="2">
                                    <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,50,100]"></mfBootstrapPaginator>
                                 </td>
                                 <td colspan="1" style="text-align: right;">
                                    <button type="button" class="btn btn-outline-primary" (click)="addManualAction()">Add
                                       Action</button>
                                 </td>
                              </tr>
                           </tfoot>
                        </table>
                     </div>
                  </div>
               </div>
            </div>-->
            <div id="ruleAccordion" role="tablist" aria-multiselectable="true" *ngIf="isStateRuleCompatible()">
               <div class="panel card">
                  <div id="ruleTabHeader" class="card-header" heightStyle="content" role="tab">
                     <h5 class="mb-0">
                        <a data-toggle="collapse" data-parent="#ruleAccordion" href="#ruleCollapse" aria-expanded="true"
                           aria-controls="ruleCollapse">
                           Rule Expressions
                        </a>
                     </h5>
                  </div>
                  <div id="ruleCollapse" class="collapse show" role="tabpanel" aria-labelledby="ruleTabHeader">
                     <div class="card-block">
                        <table class="table" [mfData]="tempState.ruleList" [mfRowsOnPage]="5">
                           <thead>
                              <tr>
                                 <th>Action</th>
                                 <th>Key to save Result</th>
                                 <th>Expression</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr *ngFor="let rule of tempState.ruleList">
                                 <td>
                                    <button type="button" class="btn btn-outline-danger" title="Delete" (click)="removeRule(rule)">
                                       <i class="ion-close-round"></i>
                                    </button>
                                 </td>
                                 <td>
                                    <input type="text" class="form-control" placeholder="Key" [value]="rule.key"
                                       (input)="rule.key = $event.target.value">
                                 </td>
                                 <td>
                                    <input type="text" class="form-control" placeholder="Expression" [value]="rule.expression"
                                       (input)="rule.expression = $event.target.value" />
                                 </td>
                              </tr>
                           </tbody>
                           <tfoot>
                              <tr>
                                 <td colspan="2">
                                    <mfBootstrapPaginator [rowsOnPageSet]="[5,10,25,50,100]"></mfBootstrapPaginator>
                                 </td>
                                 <td colspan="1" style="text-align: right;">
                                    <button type="button" class="btn btn-outline-primary" (click)="addRule()">Add Rule</button>
                                 </td>
                              </tr>
                           </tfoot>
                        </table>
                     </div>
                  </div>
               </div>
            </div>
            <div id="eventAccordion" role="tablist" aria-multiselectable="true" *ngIf="tempState.events.length > 0">
               <div *ngFor="let event of tempState.events; let eventIndex=index" class="panel">
                  <div class="card">
                     <div *ngIf="eventIndex == 0" [id]="'eventTabHeading' + eventIndex" class="card-header" heightStyle="content"
                        role="tab" (click)="disableBulkEdit()">
                        <h5 class="mb-0">
                           <a data-toggle="collapse" data-parent="#eventAccordion" [href]="'#eventCollapse' + eventIndex"
                              aria-expanded="true" [attr.aria-controls]="'eventCollapse' + eventIndex">
                              {{event.eventCd != null? event.eventCd : "Event"}}
                           </a>
                        </h5>
                     </div>
                     <div *ngIf="eventIndex != 0" [id]="'eventTabHeading' + eventIndex" class="card-header" heightStyle="content"
                        role="tab" (click)="disableBulkEdit()">
                        <h5 class="mb-0">
                           <a class="collapsed" data-toggle="collapse" data-parent="#eventAccordion" [href]="'#eventCollapse' + eventIndex"
                              aria-expanded="false" [attr.aria-controls]="'eventCollapse' + eventIndex">
                              {{event.eventCd != null? event.eventCd : "Event"}}
                           </a>
                        </h5>
                     </div>
                     <div *ngIf="eventIndex == 0" [id]="'eventCollapse' + eventIndex" class="collapse show" role="tabpanel"
                        [attr.aria-labelledby]="'eventTabHeading' + eventIndex">
                        <div class="card-block">
                           <form>
                              <div class="form-group">
                                 <label for="inputEventCode">
                                    Event Code
                                 </label>
                                 <input type="text" class="form-control" id="inputEventCode" placeholder="Event Code"
                                    [(ngModel)]="event.eventCd" name="eventCd" />
                              </div>
                              <div class="form-group">
                                 <label for="inputOperand">
                                    Operand
                                 </label>
                                 <select class="selectpicker form-control" required id="inputOperand" title="Select Operand"
                                    [(ngModel)]="event.operand" name="operand">
                                    <option *ngFor="let operand of sourceOperands" [value]="operand">{{operand}}</option>
                                 </select>
                              </div>
                              <div [id]="'expAccordion' + eventIndex" role="tablist" aria-multiselectable="true" *ngIf="!bulkEdit && event.expressionList.length > 0">
                                 <div *ngFor="let expression of event.expressionList; let expIndex=index" class="panel">
                                    <div class="card">
                                       <div *ngIf="expIndex == 0" [id]="'event' + eventIndex + 'expTabHeading' + expIndex"
                                          class="card-header" heightStyle="content" role="tab">
                                          <h5 class="mb-0">
                                             <a data-toggle="collapse" [attr.data-parent]="'#expAccordion' + eventIndex"
                                                [href]="'#event' + eventIndex + 'expCollapse' + expIndex" aria-expanded="true"
                                                [attr.aria-controls]="'event' + eventIndex + 'expCollapse' + expIndex">
                                                {{expression.value != null ? expression.value : "Expression"}}
                                             </a>
                                          </h5>
                                       </div>
                                       <div *ngIf="expIndex != 0" [id]="'event' + eventIndex + 'expTabHeading' + expIndex"
                                          class="card-header" heightStyle="content" role="tab">
                                          <h5 class="mb-0">
                                             <a class="collapsed" data-toggle="collapse" [attr.data-parent]="'#expAccordion' + eventIndex"
                                                [href]="'#event' + eventIndex + 'expCollapse' + expIndex" aria-expanded="false"
                                                [attr.aria-controls]="'event' + eventIndex + 'expCollapse' + expIndex">
                                                {{expression.value != null ? expression.value : "Expression"}}
                                             </a>
                                          </h5>
                                       </div>
                                       <div *ngIf="expIndex == 0" [id]="'event' + eventIndex + 'expCollapse' + expIndex"
                                          class="collapse show" role="tabpanel" [attr.aria-labelledby]="'event' + eventIndex + 'expTabHeading' + expIndex">
                                          <div class="card-block">
                                             <form>
                                                <div class="form-group">
                                                   <label required [for]="'expValue' + expIndex">
                                                      Value
                                                   </label>
                                                   <input type="text" class="form-control" required [id]="'expValue' + expIndex"
                                                      placeholder="Expression" [(ngModel)]="expression.value" name="value" />
                                                </div>
                                                <div class="form-group" *ngIf="event.expressionList.length > 1">
                                                   <button type="button" class="btn btn-outline-danger" (click)="deleteExpression(expression, event)">
                                                      Remove Expression
                                                   </button>
                                                </div>
                                             </form>
                                          </div>
                                       </div>
                                       <div *ngIf="expIndex != 0" [id]="'event' + eventIndex + 'expCollapse' + expIndex"
                                          class="collapse" role="tabpanel" [attr.aria-labelledby]="'event' + eventIndex + 'expTabHeading' + expIndex">
                                          <div class="card-block">
                                             <form>
                                                <div class="form-group">
                                                   <label required [for]="'expValue' + expIndex">
                                                      Value
                                                   </label>
                                                   <input type="text" class="form-control" required [id]="'expValue' + expIndex"
                                                      placeholder="Value" [(ngModel)]="expression.value" name="value" />
                                                </div>
                                                <div class="form-group" *ngIf="event.expressionList.length > 1">
                                                   <button type="button" class="btn btn-outline-danger" (click)="deleteExpression(expression, event)">
                                                      Remove Expression
                                                   </button>
                                                </div>
                                             </form>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <div *ngIf="bulkEdit" class="form-group">
                                 <label>
                                    Expressions Bulk Edit
                                 </label>
                                 <textarea class="form-control" placeholder="Enter event expressions (separated by line)"
                                    [(ngModel)]="bulkExpressions" name="bulkExpressions"></textarea>
                              </div>
                              <div class="form-group">
                                 <button type="button" class="btn btn-outline-danger" (click)="disableBulkEdit(); deleteEvent(event);">
                                    Remove Event
                                 </button>
                                 <button *ngIf="!bulkEdit" type="button" class="btn btn-outline-primary" (click)="addExpression(event)">
                                    Add Expression
                                 </button>
                                 <button *ngIf="!bulkEdit" type="button" class="btn btn-outline-primary" (click)="enableBulkEdit(event)">
                                    Bulk Edit
                                 </button>
                                 <button *ngIf="bulkEdit" type="button" class="btn btn-outline-primary" (click)="disableBulkEdit()">
                                    Normal Edit
                                 </button>
                              </div>
                           </form>
                        </div>
                     </div>
                     <div *ngIf="eventIndex != 0" [id]="'eventCollapse' + eventIndex" class="collapse" role="tabpanel"
                        [attr.aria-labelledby]="'eventTabHeading' + eventIndex">
                        <div class="card-block">
                           <form>
                              <div class="form-group">
                                 <label for="inputEventCode">
                                    Event Code
                                 </label>
                                 <input type="text" class="form-control" id="inputEventCode" placeholder="Event Code"
                                    [(ngModel)]="event.eventCd" name="eventCd" />
                              </div>
                              <div class="form-group">
                                 <label for="inputOperand">
                                    Operand
                                 </label>
                                 <select class="selectpicker form-control" required id="inputOperand" title="Select Operand"
                                    [(ngModel)]="event.operand" name="operand">
                                    <option *ngFor="let operand of sourceOperands" [value]="operand">{{operand}}</option>
                                 </select>
                              </div>
                              <div [id]="'expAccordion' + eventIndex" role="tablist" aria-multiselectable="true" *ngIf="!bulkEdit && event.expressionList.length > 0">
                                 <div *ngFor="let expression of event.expressionList; let expIndex=index" class="panel">
                                    <div class="card">
                                       <div *ngIf="expIndex == 0" [id]="'event' + eventIndex + 'expTabHeading' + expIndex"
                                          class="card-header" heightStyle="content" role="tab">
                                          <h5 class="mb-0">
                                             <a data-toggle="collapse" [attr.data-parent]="'#expAccordion' + eventIndex"
                                                [href]="'#event' + eventIndex + 'expCollapse' + expIndex" aria-expanded="true"
                                                [attr.aria-controls]="'event' + eventIndex + 'expCollapse' + expIndex">
                                                {{expression.value}}
                                             </a>
                                          </h5>
                                       </div>
                                       <div *ngIf="expIndex != 0" [id]="'event' + eventIndex + 'expTabHeading' + expIndex"
                                          class="card-header" heightStyle="content" role="tab">
                                          <h5 class="mb-0">
                                             <a class="collapsed" data-toggle="collapse" [attr.data-parent]="'#expAccordion' + eventIndex"
                                                [href]="'#event' + eventIndex + 'expCollapse' + expIndex" aria-expanded="false"
                                                [attr.aria-controls]="'event' + eventIndex + 'expCollapse' + expIndex">
                                                {{expression.value}}
                                             </a>
                                          </h5>
                                       </div>
                                       <div *ngIf="expIndex == 0" [id]="'event' + eventIndex + 'expCollapse' + expIndex"
                                          class="collapse show" role="tabpanel" [attr.aria-labelledby]="'event' + eventIndex + 'expTabHeading' + expIndex">
                                          <div class="card-block">
                                             <form>
                                                <div class="form-group">
                                                   <label required [for]="'expValue' + expIndex">
                                                      Value
                                                   </label>
                                                   <input type="text" class="form-control" required [id]="'expValue' + expIndex"
                                                      placeholder="Value" [(ngModel)]="expression.value" name="value" />
                                                </div>
                                                <div class="form-group" *ngIf="event.expressionList.length > 1">
                                                   <button type="button" class="btn btn-outline-danger" (click)="deleteExpression(expression, event)">
                                                      Remove Expression
                                                   </button>
                                                </div>
                                             </form>
                                          </div>
                                       </div>
                                       <div *ngIf="expIndex != 0" [id]="'event' + eventIndex + 'expCollapse' + expIndex"
                                          class="collapse" role="tabpanel" [attr.aria-labelledby]="'event' + eventIndex + 'expTabHeading' + expIndex">
                                          <div class="card-block">
                                             <form>
                                                <div class="form-group">
                                                   <label required [for]="'expValue' + expIndex">
                                                      Value
                                                   </label>
                                                   <input type="text" class="form-control" required [id]="'expValue' + expIndex"
                                                      placeholder="Value" [(ngModel)]="expression.value" name="value" />
                                                </div>
                                                <div class="form-group" *ngIf="event.expressionList.length > 1">
                                                   <button type="button" class="btn btn-outline-danger" (click)="deleteExpression(expression, event)">
                                                      Remove Expression
                                                   </button>
                                                </div>
                                             </form>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <div *ngIf="bulkEdit" class="form-group">
                                 <label>
                                    Expressions Bulk Edit
                                 </label>
                                 <textarea class="form-control" placeholder="Enter event expressions (separated by line)"
                                    [(ngModel)]="bulkExpressions" name="bulkExpressions"></textarea>
                              </div>
                              <div class="form-group">
                                 <button type="button" class="btn btn-outline-danger" (click)="disableBulkEdit(); deleteEvent(event)">
                                    Remove Event
                                 </button>
                                 <button *ngIf="!bulkEdit" type="button" class="btn btn-outline-primary" (click)="addExpression(event)">
                                    Add Expression
                                 </button>
                                 <button *ngIf="!bulkEdit" type="button" class="btn btn-outline-primary" (click)="enableBulkEdit(event)">
                                    Bulk Edit
                                 </button>
                                 <button *ngIf="bulkEdit" type="button" class="btn btn-outline-primary" (click)="disableBulkEdit()">
                                    Normal Edit
                                 </button>
                              </div>
                           </form>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer">
            <button type="button" class="btn btn-outline-info" data-dismiss="modal" (click)="disableBulkEdit()">Close</button>
            <!-- <button type="button" class="btn btn-default" data-toggle="modal" data-target="#eventModal" (click)="addEvent()">Add Event</button> -->
            <button type="button" class="btn btn-outline-primary" (click)="addEvent()">Add Event</button>
            <button type="submit" class="btn btn-outline-success" (click)="disableBulkEdit(); saveState();">{{stateCreateMode
               ?
               'Create' : 'Update'}}</button>
         </div>
      </div>
   </div>
</div>
<!-- Modal - Settings -->
<div class="modal fade" data-backdrop="static" data-keyboard="false" id="settignsModal" tabindex="-1" role="dialog"
   attr.aria-labelledby="settingsModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="settingsModalLabel">
               Settings
            </h4>
            <button type="button" class="btn btn-outline-info" data-dismiss="modal">
               <span aria-hidden="true">&times;</span>
               <span class="sr-only">Close</span>
            </button>
         </div>
         <!-- Modal Body -->
         <div class="modal-body">
            <ul class="nav nav-tabs" role="tablist">
               <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#header" role="tab" aria-expanded="true">Header</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#datapoints" role="tab">Data Points</a>
               </li>
            </ul>
            <div class="tab-content">
               <div role="tabpanel" class="tab-pane fade show active" id="header">
                  <h3>Header</h3>
                  <form>
                     <div class="form-group">
                        <label class="col-md-12 col-sm-12 col-xs-12" for="inputMachineLabel">
                           Process Name
                        </label>
                        <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" id="inputMachineLabel"
                           placeholder="Process Name" [(ngModel)]="tempGraphObject.machineLabel" name="machineLabel" />
                     </div>
                     <div class="form-group">
                        <label class="col-md-12 col-sm-12 col-xs-12" for="inputMachineType">
                           Process Code
                        </label>
                        <input *ngIf="graphObject.machineType && graphObject.machineType.length > 0" disabled type="text"
                           class="col-md-12 col-sm-12 col-xs-12 form-control" id="inputMachineType" placeholder="Process Code"
                           [(ngModel)]="tempGraphObject.machineType" name="machineType" />
                        <input *ngIf="!graphObject.machineType || graphObject.machineType.length == 0" type="text"
                           class="col-md-12 col-sm-12 col-xs-12 form-control" id="inputMachineType" placeholder="Process Code"
                           [(ngModel)]="tempGraphObject.machineType" name="machineType" />
                     </div>
                     <div class="form-group">
                        <label class="col-md-12 col-sm-12 col-xs-12" for="inputProcessOwner">
                           Process Owner
                        </label>
                        <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" id="inputProcessOwner"
                           placeholder="Process Owner" [(ngModel)]="tempGraphObject.processOwner" name="processOwner" />
                     </div>
                     <div class="form-group">
                        <label class="col-md-12 col-sm-12 col-xs-12" for="inputProcessOwner">
                           Process Entity
                        </label>
                        <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" id="inputprimaryEntity"
                           placeholder="Process Entity" [(ngModel)]="tempGraphObject.primaryEntity" name="primaryEntity" />
                     </div>
                     <div class="form-group">
                        <label class="col-md-12 col-sm-12 col-xs-12" for="inputVersionNumber">
                           Version Number
                        </label>
                        <input type="number" disabled class="col-md-12 col-sm-12 col-xs-12 form-control" id="inputVersionNumber"
                           placeholder="Version Number" min="0" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57"
                           [(ngModel)]="tempGraphObject.version" name="version" />
                     </div>
                     <div class="form-group">
                        <label class="col-md-12 col-sm-12 col-xs-12" for="inputStatus">
                           Status
                        </label>
                        <select disabled="true" class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" id="inputStatus"
                           title="Select Status">
                           <option *ngFor="let status of sourceStatusCodes" [value]="status">{{status}}</option>
                        </select>
                     </div>
                  </form>
               </div>
               <div role="tabpanel" class="tab-pane fade" id="datapoints">
                  <div class="row">
                     <div class="col-lg--6 col-md-6 col-sm-6 col-xs-6">
                        <h3>Data Point</h3>
                     </div>
                     <div class="col-lg--6 col-md-6 col-sm-6 col-xs-6">
                        <button type="button" class="btn btn-primary pull-right" id="addDataPointButton" (click)="addNewDataPoint()">
                           <i class="fa fa-plus" aria-hidden="true"></i>
                        </button>
                     </div>
                  </div>
                  <div id="dpAccordion" role="tablist" aria-multiselectable="true" *ngIf="tempGraphObject.dataPointConfigurationList.length > 0">
                     <div *ngFor="let dataPoint of tempGraphObject.dataPointConfigurationList; let index=index" class="panel">
                        <div class="card">
                           <div *ngIf="index == 0" [id]="'dpTabHeading' + index" class="card-header" heightStyle="content"
                              role="tab">
                              <h5 class="mb-0">
                                 <a data-toggle="collapse" data-parent="#dpAccordion" [href]="'#dpCollapse' + index"
                                    aria-expanded="true" [attr.aria-controls]="'dpCollapse' + index" (click)="selectedDataPoint=dataPoint">
                                    {{dataPoint.sequence}} - {{dataPoint.dataPointLabel}}
                                 </a>
                              </h5>
                           </div>
                           <div *ngIf="index != 0" [id]="'dpTabHeading' + index" class="card-header" heightStyle="content"
                              role="tab">
                              <h5 class="mb-0">
                                 <a class="collapsed" data-toggle="collapse" data-parent="#dpAccordion" [href]="'#dpCollapse' + index"
                                    aria-expanded="false" [attr.aria-controls]="'dpCollapse' + index" (click)="selectedDataPoint=dataPoint">
                                    {{dataPoint.sequence}} - {{dataPoint.dataPointLabel}}
                                 </a>
                              </h5>
                           </div>
                           <div *ngIf="index == 0" [id]="'dpCollapse' + index" class="collapse show" role="tabpanel"
                              [attr.aria-labelledby]="'dpTabHeading' + index">
                              <div class="card-block">
                                 <form>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpSequence' + index">
                                          Sequence
                                       </label>
                                       <input type="number" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpSequence' + index" placeholder="Sequence" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46)"
                                          [(ngModel)]="dataPoint.sequence" name="sequence" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpInputName' + index">
                                          Name
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpInputName' + index" placeholder="Name" [(ngModel)]="dataPoint.dataPointName"
                                          name="dataPointName" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpLabel' + index">
                                          Label
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpLabel' + index" placeholder="Label" [(ngModel)]="dataPoint.dataPointLabel"
                                          name="dataPointLabel" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpDescription' + index">
                                          Description
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpDescription' + index" placeholder="Description" [(ngModel)]="dataPoint.description"
                                          name="description" />
                                    </div>
                                    <div class="row">
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.headerFlag"
                                          [label]="'Header Flag'" (event)="dataPoint.headerFlag = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.businessKeyFlag"
                                          [label]="'Business Key Flag'" (event)="dataPoint.businessKeyFlag = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.businessMonitorKey"
                                          [label]="'Business Monitor Flag'" (event)="dataPoint.businessMonitorKey = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.reportDataKey"
                                          [label]="'Report Flag'" (event)="dataPoint.reportDataKey = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.percentageChange"
                                          [label]="'Percentage Change'" (event)="dataPoint.percentageChange = $event.target.checked"></api-checkbox>
                                    </div>
                                    <div class="form-group" *ngIf="dataPoint.businessMonitorKey">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'graphType' + index">
                                          Graph Type
                                       </label>
                                       <select class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" required
                                          [id]="'graphType' + index" title="Select graph type" [(ngModel)]="dataPoint.graphType"
                                          name="graphType">
                                          <option *ngFor="let gtype of graphtypList" [ngValue]="gtype">{{gtype}}</option>
                                       </select>
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpInputExpression' + index">
                                          Expression
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpInputExpression' + index" placeholder="Expression" [(ngModel)]="dataPoint.expression"
                                          name="expression" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpDataType' + index">
                                          DataType
                                       </label>
                                       <select class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" required
                                          [id]="'dpDataType' + index" title="Select data type" [(ngModel)]="dataPoint.dataType"
                                          name="dataType">
                                          <option *ngFor="let dataType of sourceDataTypes" [ngValue]="dataType">{{dataType}}</option>
                                       </select>
                                    </div>
                                    <div class="form-group" *ngIf="dataPoint.dataType == 'ARRAY'">
                                       <table class="table table-striped">
                                          <thead>
                                             <tr>
                                                <th>key</th>
                                                <th>Value</th>
                                                <th>
                                                   <button type="button" class="btn btn-outline-primary" (click)="onAddChildDataPoint(dataPoint)">
                                                      <i class="ion-plus-round"></i>
                                                   </button>
                                                </th>
                                             </tr>
                                          </thead>
                                          <tbody>
                                             <tr *ngFor="let childDataPoint of dataPoint.childdataPoints">
                                                <td>
                                                   <input type="text" class="form-control" placeholder="Name" [value]="childDataPoint.dataPointName"
                                                      (input)="childDataPoint.dataPointName = $event.target.value">
                                                </td>
                                                <td>
                                                   <input type="text" class="form-control" placeholder="Label" [value]="childDataPoint.dataPointLabel"
                                                      (input)="childDataPoint.dataPointLabel = $event.target.value">
                                                </td>
                                                <td>
                                                   <button type="button" class="btn btn-outline-danger" (click)="deleteChildDataPoint(dataPoint.childdataPoints,childDataPoint)">
                                                      <i class="ion-ios-trash"></i>
                                                   </button>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                    <div class="form-group" *ngIf="dataPoint.dataType === 'SINGLE_SELECT' || dataPoint.dataType === 'MULTI_SELECT'">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpInputSource' + index">
                                          Valid Input Source
                                       </label>
                                       <tag-input class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" [id]="'dpInputSource' + index"
                                          [(ngModel)]="dataPoint.inputSource" name="inputSource" [modelAsStrings]="true"
                                          [editable]="true" [separatorKeys]="[32]" placeholder="+Input (Enter separated)"
                                          secondaryPlaceholder="Populate source input" theme="minimal" class="custom-input-tag-border">
                                       </tag-input>
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpOperand' + index">
                                          Validation Operand
                                       </label>
                                       <select class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" required
                                          [id]="'dpOperand' + index" title="Select valitdation operand" [(ngModel)]="dataPoint.operand"
                                          name="operand">
                                          <option *ngFor="let operand of sourceOperands" [ngValue]="operand">{{operand}}</option>
                                       </select>
                                    </div>
                                 </form>
                                 <br>
                                 <h3>Validation List</h3>
                                 <br>
                                 <table class="table" [mfData]="dataPoint.validations" [mfRowsOnPage]="5">
                                    <thead>
                                       <tr>
                                          <th>Action</th>
                                          <th>Sequence</th>
                                          <th>Expression</th>
                                          <th>Error Message</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr *ngFor="let validation of dataPoint.validations">
                                          <td>
                                             <button type="button" class="btn btn-outline-danger" title="Delete"
                                                (click)="removeDataPointValidation(validation, dataPoint)">
                                                <i class="ion-close-round"></i>
                                             </button>
                                          </td>
                                          <td>
                                             <input type="number" class="form-control" placeholder="Sequence"
                                                [(ngModel)]="validation.sequence" name="sequence" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46)" />
                                          </td>
                                          <td>
                                             <input type="text" class="form-control" placeholder="Expression"
                                                [(ngModel)]="validation.expression" name="expression">
                                          </td>
                                          <td>
                                             <input type="text" class="form-control" placeholder="Error Message"
                                                [(ngModel)]="validation.errorMessage" name="errorMessage">
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                                 <br>
                                 <button type="button" class="btn btn-outline-primary pull-right" (click)="addDataPointValidation(dataPoint)">Add
                                    Validation</button>
                                 <br>
                                 <form>
                                    <div class="form-group" *ngIf="tempGraphObject.dataPointConfigurationList.length > 1">
                                       <button type="button" class="btn btn-outline-danger" (click)="deleteDataPoint(dataPoint)">
                                          Remove Data Point
                                       </button>
                                    </div>
                                 </form>
                              </div>
                           </div>
                           <div *ngIf="index != 0" [id]="'dpCollapse' + index" class="collapse" role="tabpanel"
                              [attr.aria-labelledby]="'dpTabHeading' + index">
                              <div class="card-block">
                                 <form>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpSequence' + index">
                                          Sequence
                                       </label>
                                       <input type="number" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpSequence' + index" placeholder="Sequence" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46)"
                                          [(ngModel)]="dataPoint.sequence" name="sequence" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpInputName' + index">
                                          Name
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpInputName' + index" placeholder="Name" [(ngModel)]="dataPoint.dataPointName"
                                          name="dataPointName" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpLabel' + index">
                                          Label
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpLabel' + index" placeholder="Label" [(ngModel)]="dataPoint.dataPointLabel"
                                          name="dataPointLabel" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" required [for]="'dpDescription' + index">
                                          Description
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpDescription' + index" placeholder="Description" [(ngModel)]="dataPoint.description"
                                          name="description" />
                                    </div>
                                    <div class="row">
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.headerFlag"
                                          [label]="'Header Flag'" (event)="dataPoint.headerFlag = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.businessKeyFlag"
                                          [label]="'Business Key Flag'" (event)="dataPoint.businessKeyFlag = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.businessMonitorKey"
                                          [label]="'Business Monitor Flag'" (event)="dataPoint.businessMonitorKey = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.percentageChange"
                                          [label]="'Percentage Change'" (event)="dataPoint.percentageChange = $event.target.checked"></api-checkbox>
                                       <api-checkbox class="col-md-3 col-sm-3 col-xs-3" [checked]="dataPoint.reportDataKey"
                                          [label]="'Report Flag'" (event)="dataPoint.reportDataKey = $event.target.checked"></api-checkbox>
                                    </div>
                                    <div class="form-group" *ngIf="dataPoint.businessMonitorKey">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'graphType' + index">
                                          Graph Type
                                       </label>
                                       <select class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" required
                                          [id]="'graphType' + index" title="Select graph type" [(ngModel)]="dataPoint.graphType"
                                          name="graphType">
                                          <option *ngFor="let gtype of graphtypList" [ngValue]="gtype">{{gtype}}</option>
                                       </select>
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpInputExpression' + index">
                                          Expression
                                       </label>
                                       <input type="text" class="col-md-12 col-sm-12 col-xs-12 form-control" required
                                          [id]="'dpInputExpression' + index" placeholder="Expression" [(ngModel)]="dataPoint.expression"
                                          name="expression" />
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpDataType' + index">
                                          DataType
                                       </label>
                                       <select class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" required
                                          [id]="'dpDataType' + index" title="Select data type" [(ngModel)]="dataPoint.dataType"
                                          name="dataType">
                                          <option *ngFor="let dataType of sourceDataTypes" [ngValue]="dataType">{{dataType}}</option>
                                       </select>
                                    </div>
                                    <div class="form-group" *ngIf="dataPoint.dataType == 'ARRAY'">
                                       <table class="table table-striped">
                                          <thead>
                                             <tr>
                                                <th>key</th>
                                                <th>Value</th>
                                                <th>
                                                   <button type="button" class="btn btn-outline-primary" (click)="onAddChildDataPoint(dataPoint)">
                                                      <i class="ion-plus-round"></i>
                                                   </button>
                                                </th>
                                             </tr>
                                          </thead>
                                          <tbody>
                                             <tr *ngFor="let childDataPoint of dataPoint.childdataPoints">
                                                <td>
                                                   <input type="text" class="form-control" placeholder="Name" [value]="childDataPoint.dataPointName"
                                                      (input)="childDataPoint.dataPointName = $event.target.value">
                                                </td>
                                                <td>
                                                   <input type="text" class="form-control" placeholder="Label" [value]="childDataPoint.dataPointLabel"
                                                      (input)="childDataPoint.dataPointLabel = $event.target.value">
                                                </td>
                                                <td>
                                                   <button type="button" class="btn btn-outline-danger" (click)="deleteChildDataPoint(dataPoint.childdataPoints,childDataPoint)">
                                                      <i class="ion-ios-trash"></i>
                                                   </button>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                    <div class="form-group" *ngIf="dataPoint.dataType === 'SINGLE_SELECT' || dataPoint.dataType === 'MULTI_SELECT'">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpInputSource' + index">
                                          Valid Input Source
                                       </label>
                                       <tag-input class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" [id]="'dpInputSource' + index"
                                          [(ngModel)]="dataPoint.inputSource" name="inputSource" [modelAsStrings]="true"
                                          [editable]="true" [separatorKeys]="[32]" placeholder="+Input (Enter separated)"
                                          secondaryPlaceholder="Populate source input" theme="minimal" class="custom-input-tag-border">
                                       </tag-input>
                                    </div>
                                    <div class="form-group">
                                       <label class="col-md-12 col-sm-12 col-xs-12" [for]="'dpOperand' + index">
                                          Validation Operand
                                       </label>
                                       <select class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" required
                                          [id]="'dpOperand' + index" title="Select valitdation operand" [(ngModel)]="dataPoint.operand"
                                          name="operand">
                                          <option *ngFor="let operand of sourceOperands" [ngValue]="operand">{{operand}}</option>
                                       </select>
                                    </div>
                                 </form>
                                 <br>
                                 <table class="table" [mfData]="dataPoint.validations" [mfRowsOnPage]="5">
                                    <thead>
                                       <tr>
                                          <th>Action</th>
                                          <th>Sequence</th>
                                          <th>Expression</th>
                                          <th>Error Message</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr *ngFor="let validation of dataPoint.validations">
                                          <td>
                                             <button type="button" class="btn btn-outline-danger" title="Delete"
                                                (click)="removeDataPointValidation(validation, dataPoint)">
                                                <i class="ion-close-round"></i>
                                             </button>
                                          </td>
                                          <td>
                                             <input type="number" class="form-control" placeholder="Sequence"
                                                [(ngModel)]="validation.sequence" name="sequence" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 46)" />
                                          </td>
                                          <td>
                                             <input type="text" class="form-control" placeholder="Expression"
                                                [(ngModel)]="validation.expression" name="expression">
                                          </td>
                                          <td>
                                             <input type="text" class="form-control" placeholder="Error Message"
                                                [(ngModel)]="validation.errorMessage" name="errorMessage">
                                          </td>
                                       </tr>
                                    </tbody>
                                    <tfoot>
                                       <tr>
                                          <td colspan="0" style="text-align: right;">
                                             <button type="button" class="btn btn-outline-primary" (click)="addDataPointValidation(dataPoint)">Add
                                                Validation</button>
                                          </td>
                                       </tr>
                                    </tfoot>
                                 </table>
                                 <br>
                                 <form>
                                    <div class="form-group" *ngIf="tempGraphObject.dataPointConfigurationList.length > 1">
                                       <button type="button" class="btn btn-outline-danger" (click)="deleteDataPoint(dataPoint)">
                                          Remove Data Point
                                       </button>
                                    </div>
                                 </form>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="settingsModalFooter">
            <button type="button" class="btn btn-success" id="saveChangesButton" (click)="save()" data-dismiss="modal">
               Save Changes
            </button>
         </div>
      </div>
   </div>
</div>
<!-- New Edge Modal -->
<div class="modal fade" data-backdrop="static" data-keyboard="false" id="newEdgeModal" tabindex="-1" role="dialog"
   attr.aria-labelledby="newEdgeLabel" aria-hidden="true">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="newEdgeLabel">
               Select Event
            </h4>
            <button type="button" class="btn btn-outline-info" data-dismiss="modal" (click)="deleteEdge()">
               <span aria-hidden="true">&times;</span>
               <span class="sr-only">Close</span>
            </button>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            <form>
               <div class="form-group">
                  <label class="col-md-12 col-sm-12 col-xs-12">
                     Select event for which the state will get triggered
                  </label>
                  <select class="col-md-12 col-sm-12 col-xs-12 selectpicker form-control" title="Select Event"
                     [(ngModel)]="tempEdgeEvent" name="tempEdgeEvent">
                     <option *ngFor="let event of sourceEvents" [ngValue]="event">{{event.eventCd}}</option>
                  </select>
               </div>
            </form>
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer">
            <button type="button" class="btn btn-outline-danger" data-dismiss="modal" (click)="deleteEdge()">Cancel</button>
            <button type="button" class="btn btn-outline-success" data-dismiss="modal" (click)="saveEdge()">Confirm</button>
         </div>
      </div>
   </div>
</div>
<!-- Discard Warning Modal -->
<div class="modal fade" id="discardWarningModal" tabindex="-1" role="dialog" attr.aria-labelledby="discardWarningLabel"
   aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="discardWarningLabel">
               Discard Changes
            </h4>
            <button type="button" class="btn btn-outline-info" data-dismiss="modal">
               <span aria-hidden="true">&times;</span>
               <span class="sr-only">Close</span>
            </button>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            Are you sure you want to discard all the changes you have made?
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer">
            <button type="button" class="btn btn-outline-warning" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-outline-danger" data-dismiss="modal" (click)="discardChanges()">Confirm</button>
         </div>
      </div>
   </div>
</div>
<!-- Reassign Events Modal -->
<div class="modal fade" id="reassignEventsModal" tabindex="-1" role="dialog" attr.aria-labelledby="reassignEventsLabel"
   aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="reassignEventsLabel">
               {{warningHeader}}
            </h4>
            <button type="button" class="btn btn-outline-info" data-dismiss="modal">
               <span aria-hidden="true">&times;</span>
               <span class="sr-only">Close</span>
            </button>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            <p>{{warningBody}}</p>
            <form>
               <div class="form-group" *ngFor="let stateCd of childStateList">
                  <label>{{stateCd}}</label>
                  <select class="selectpicker form-control" title="Select triggering event" [(ngModel)]="childStateEventMap[stateCd]"
                     name="childStateEventMap">
                     <option *ngFor="let event of sourceEvents" [ngValue]="event">{{event.eventCd}}</option>
                  </select>
               </div>
            </form>
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer">
            <button type="button" class="btn btn-outline-warning" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-outline-success" data-dismiss="modal" (click)="updateStateTriggers()">Update</button>
         </div>
      </div>
   </div>
</div>
<div class="modal fade" id="infoModalDesign" tabindex="-1" role="dialog" attr.aria-labelledby="successModal"
   aria-hidden="true">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="successModal">
               State Information
            </h4>
            <button type="button" class="btn btn-outline-info" data-dismiss="modal">
               <span aria-hidden="true">&times;</span>
               <span class="sr-only">Close</span>
            </button>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            <form class="form-horizontal">
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Name :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.name}}</label>
               </div>
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Duration :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.duration}}{{'
                     seconds'}}</label>
               </div>
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Early Start :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.earlystart}}{{'
                     seconds'}}</label>
               </div>
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Early Finish :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.earlyfinish}}{{'
                     seconds'}}</label>
               </div>
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Critical :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.is_critical}}</label>
               </div>
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Late Start :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.latestart}}{{'
                     seconds'}}</label>
               </div>
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Slack :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.slack}}{{'
                     seconds'}}</label>
               </div>
               <div class="form-group row">
                  <label for="inputEmail3" class="col-sm-2 form-control-label" *ngIf="selectedModel">Late Finish :</label>
                  <label for="inputEmail3" class="form-control-label" *ngIf="selectedModel">{{selectedModel.latefinish}}</label>
               </div>
            </form>
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer">
            <button type="button" class="btn btn-outline-info" data-dismiss="modal">Close</button>
         </div>
      </div>
   </div>
</div>
<!-- Warning Modal -->
<div class="modal fade" id="warningModal" tabindex="-1" role="dialog" attr.aria-labelledby="warningLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="warningLabel">
               {{warningHeader}}
            </h4>
            <button type="button" class="btn btn-outline-info" data-dismiss="modal">
               <span aria-hidden="true">&times;</span>
               <span class="sr-only">Close</span>
            </button>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            {{warningBody}}
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer">
            <button type="button" class="btn btn-outline-warning" data-dismiss="modal">Dismiss</button>
         </div>
      </div>
   </div>
</div>
<div class="modal fade" id="fileUploadModel" tabindex="-1" role="dialog" attr.aria-labelledby="warningLabel"
   aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="warningLabel">
               {{"Uploading File"}}
            </h4>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            <div *ngIf="progressBarFlag">
               <div class="row">
                  <div class="col-lg-12 col-md-12 col-sm-12">
                     <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%;"
                           aria-valuenow="99" aria-valuemin="0" aria-valuemax="100">Uploading File...</div>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-12 col-md-12 col-sm-12">
                     <br />
                  </div>
               </div>
            </div>
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer" *ngIf="fileUploaded">
         </div>
      </div>
   </div>
</div>
<!-- error modal -->
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog" attr.aria-labelledby="warningLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" id="warningLabel">
               Error
            </h4>
         </div>
         <!-- Modal Body -->
         <div class="modal-body" id="modal_body">
            <div>
               {{ errorToSaveGraphObject }}
            </div>
         </div>
         <!-- Modal Footer -->
         <div class="modal-footer" id="modal_footer">
            <button type="button" class="btn btn-outline-warning" data-dismiss="modal">Dismiss</button>
         </div>
      </div>
   </div>
</div>
<!-- /page content -->